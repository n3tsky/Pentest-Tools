
# Install all required dependencies
function f_install_dependencies() {

  if [ "$install" == "true" ]; then
    PKG=(
      build-essential binutils curl python-dev p7zip-full git net-tools openjdk-8-jre python-pip vim htop # default
      rdesktop vinagre libxfreerdp-client1.1 xtightvncviewer # remote access
      aircrack-ng gdb hydra nmap smbclient wireshark cifs-utils socat # Some tools
      # dependencies
      libssl-dev libffi-dev # CME
      yasm libgmp-dev libpcap-dev pkg-config libbz2-dev zlib1g-dev libopenmpi-dev openmpi-bin # JtR
      libgconf-2-4 # BloodHound
      libreadline5 libreadline-dev libusb-0.1-4 libusb-dev libqt4-dev perl pkg-config wget libncurses5-dev gcc-arm-none-eabi libstdc++-arm-none-eabi-newlib # Proxmarkv3
      libqt5xml5 libncurses5 # Hopper
    )

    PIP_PKG=(requests beautifulsoup4) # TheHarvester

    f_print "\n[*] The following dependencies will be installed\n"

    # Display list of dependencies
    for i in ${PKG[@]}; do echo $i; done
    f_print ""
    for i in ${PIP_PKG[@]}; do echo $i; done
    f_print ""

    # Ask user for confirmation
    while true; do
      read -p "Are you sure (y/n)? " -n 1 -r
      echo ""
      if [[ $REPLY =~ ^[Yy]$ ]]; then
        break
      elif [[ $REPLY =~ ^[Nn]$ ]]; then
        $ECHO "Exiting..."
        exit 1
      fi
    done

    f_print "\n[*] Installing dependencies\n"

    # Don't ask for user input
    echo "wireshark-common wireshark-common/install-setuid boolean true" | $SUDO /usr/bin/debconf-set-selections

    # Install dependencies
    $SUDO $APT -qq -y install ${PKG[@]}
    $SUDO -H pip install -U "pipenv"
    f_install "pip" "$PIP_PKG"

    f_print "\n[*] Installing dependencies - done" "ok"
  else
    f_print "\n[*] Skipping dependencies" "ok"
  fi
}
