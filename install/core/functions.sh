##################
###### Variables
##################
GREEN="\033[0;32m"
RED="\033[0;31m"
ORANGE="\033[0;33m"
NOCOLOR="\033[0m"

# Binaries
APT="/usr/bin/apt"
APTKEY="/usr/bin/apt-key"
CHMOD="/bin/chmod"
CURL="/usr/bin/curl"
DPKG="/usr/bin/dpkg"
ECHO="/bin/echo"
GIT="/usr/bin/git"
GREP="/bin/grep"
LN="/bin/ln"
MAKE="/usr/bin/make"
MKDIR="/bin/mkdir"
PIP="/usr/bin/pip"
RM="/bin/rm"
SED="/bin/sed"
SUDO="/usr/bin/sudo"
TAR="/bin/tar"
TEE="/usr/bin/tee"
UNZIP="/usr/bin/unzip"
WGET="/usr/bin/wget"
ZZ="/usr/bin/7z"


##################
###### Functions
##################

# Options
if [ "$verbose" == "false" ]; then
  QUIET="--quiet"
else
  QUIET=""
fi

# Helper function
function f_help() {
  echo -e "\nUsage: $0"
  echo -e "\tPlease change both variables \"username\" and \"directory\" (first lines of the script)"
  echo -e "\tAll tools will be installed under \"directory\" with \"username\" privileges"
  echo -e "\n\t/!\ This script doesn't need (and not recommended) to be run as root (but you might be required to type in your password for administrative tasks - apt install, etc.)"
  exit 1
}

# Generic function to print stuff
function f_print() {
  # Something to print?
  if [ $# != 0 ]; then
    if [ $# == 1 ]; then
      # Just print the message
      echo -e "${NOCOLOR}$1${NOCOLOR}"
    else
      if [ $2 == "error" ]; then
        echo -e "${RED}$1${NOCOLOR}"
      elif [ $2 == "ok" ]; then
        echo -e "${GREEN}$1${NOCOLOR}"
      elif [ $2 == "warning" ]; then
        echo -e "${ORANGE}$1${NOCOLOR}"
      fi
    fi
  fi
}

# Install through git
function f_dl_git() {
  LABEL="$1"
  URL="$2"
  DEST="$3"
  OPTS="$4"

  f_print "\n\t[*] Installing $LABEL"
  cmd="$GIT clone $QUIET $OPTS $URL $DEST"
  f_print "\t[*] cmd: $cmd"
  $GIT clone $QUIET $OPTS "$URL" $DEST
  f_print "\t[*] Installed $LABEL - done" "ok"
}

# Install through wget
function f_dl_wget() {
  LABEL="$1"
  URL="$2"
  DEST="$3"
  OPTS="$4"

  f_print "\n\t[*] Installing $LABEL"
  cmd="$WGET $QUIET $URL $OPTS -O $DEST"
  f_print "\t[*] cmd: $cmd"
  $WGET $QUIET "$URL" $OPTS -O $DEST
  f_print "\t[*] Installed $LABEL - done" "ok"
}

# Unzip (quietly) and remove zip file afterwards
function f_quiet_unzip_and_remove() {
  FILE=$1
  DEST=$2

  $UNZIP -qq "$FILE" -d "$DEST"
  $RM "$FILE"
}

# Install tools
function f_install() {
  METHOD="$1"
  ARGS="$2"

  if [ "$install" == "true" ]; then
    if [ "$METHOD" == "pip" ]; then
      $PIP install -r "$ARGS"
    fi
  fi
}

# Install tools (python setup.py install)
function f_setup_install_py() {
  ARGS="$1"

  if [ "$install" == "true" ]; then
    $SUDO $PYTHON "$ARGS" install
  fi
}

########################################
# Generic
########################################
function f_install_tools_XXX() {
  prefix="$directory/XXX"
  f_print "\n[*] Install XXX tools ($prefix)"

  # XXX

  f_print "\n[*] Install XXX tools - done" "ok"
}
