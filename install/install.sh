#!/bin/bash
# The sole purpose of this script is not to bother installing tools (manually)
# each and every time...

source "./core/functions.sh"

# username="bob"
username=`$ECHO $USER`
# directory="/home/$username/Tools"
directory="/home/$username/Tools/"
# true: display some more info
verbose=false
# false: download only, true: install dependencies + requirements + install
install=false

# Handle arguments
while getopts ":u:d:i:v:" opt; do
  case $opt in
    u) username="$OPTARG"
    ;;
    d) directory="$OPTARG"
    ;;
    i) install=true
    ;;
    v) verbose=true
    ;;
    \?) $ECHO -e "\n[!] Invalid option -$OPTARG" >&2
    f_help
    ;;
  esac
done

# Quick failsafe
if [ -z "$username" ] || [ -z "$directory" ]; then
  f_help
fi

# Ask for user confirmation
while true; do
  $ECHO -e "\n[-] Tools will be installed @:$directory, with \"$username\" privileges"
  read -p "Are you sure? (y/Y) " -n 1 -r REPLY
  if [[ $REPLY =~ ^[Yy]$ ]]; then
    break
  elif [[ $REPLY =~ ^[Nn]$ ]]; then
    $ECHO "Exiting..."
    exit 1
  fi
done

# Source all files
source "apps.conf"
source "./core/f_dependencies.sh"
source "./core/f_install_network.sh"
source "./core/f_install_recon.sh"
source "./core/f_install_windows.sh"
source "./core/f_install_pwcracking.sh"
source "./core/f_install_forensic.sh"
source "./core/f_install_wordlist.sh"
source "./core/f_install_exploits.sh"
source "./core/f_install_reverse.sh"
source "./core/f_install_RFID.sh"

########################################
# Main function
########################################

# Required dependencies
f_install_dependencies

# Creating some folders
f_print "\n[*] Creating some directories..." "ok"
$MKDIR -p "$directory"/{network,recon,windows,pwcracking,forensic,wordlists,exploits,reverse,RFID}
#web,windows,pwcracking,forensic,wordlists,database,exploits,reverse,thickClients,mobile,RFID}

# Let's go
f_install_tools_network
f_install_tools_recon
#f_install_tools_web
f_install_tools_windows
f_install_tools_pwcracking
f_install_tools_forensic
f_install_tools_wordlists
#f_install_tools_database
f_install_tools_exploits
f_install_tools_reverse
#f_install_tools_thickClients
#f_install_tools_mobile
f_install_tools_RFID
